<!--
 * @Description:
 * @Author: G
 * @Date: 2021-10-13 11:09:59
 * @LastEditTime: 2021-10-13 14:26:48
-->
<script setup lang="ts">
  import { nextTick, ref } from 'vue';
  import { icons } from './data';

  const onDragStart = (e: any, data: any) => {
    e.dataTransfer.setData('Meta2d', JSON.stringify(data));
  };

  nextTick(() => {
    // 此处只注册，未将数据放置到工具栏
    // data.ts 中配置的最后一项即为该图形库中的内容
    // (window as any).registerToolsNew();
    // (window as any).meta2dTools = undefined;
  });

  const rIcons = ref(icons);
</script>

<template>
  <div class="aside">
    <div class="icon-list">
      <div
        v-for="icon in rIcons"
        :key="icon.key"
        draggable="true"
        :title="icon.title"
        @dragstart="onDragStart($event, icon.data)"
      >
        <i v-if="icon.key" class="iconfont" :class="`icon-${icon.key}`"></i>
      </div>
    </div>
    <div class="link">
      <a href="http://2ds.le5le.com/">去官网</a>
    </div>
  </div>
</template>

<style scoped>
  .aside {
    /* width: 100%; */
    height: calc(100% - 61px);
    border-right: 1px solid #ccc;
    background-color: #fff;
    box-sizing: border-box;
  }

  .aside .icon-list {
    border-bottom: 1px solid #ccc;
  }

  .aside .icon-list > div,
  .aside .link {
    height: 51px;
    line-height: 50px;
    text-align: center;
  }

  .aside .icon-list > div i {
    cursor: pointer;
    user-select: none;
  }
  .img {
    width: 100%;
    height: 100%;
  }
</style>
